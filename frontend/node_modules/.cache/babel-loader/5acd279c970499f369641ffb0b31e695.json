{"ast":null,"code":"import _objectSpread from \"/home/lfx/Downloads/BrainJobs/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/home/lfx/Downloads/BrainJobs/frontend/src/pages/users/UsersPage.js\";\nimport React from 'react';\nimport UserList from '../../components/User/UserList/UserList';\nimport Notification from '../../components/Notification/Notification';\nimport Context from '../../context/Context';\n\nclass UsersPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      users: [],\n      error: null\n    };\n    this.deleteUser = this.deleteUser.bind(this);\n  }\n\n  componentWillMount() {\n    if (!this.context.token) return this.props.history.push('/login');\n    const options = {\n      headers: {\n        'Authorization': 'Bearer ' + this.context.token\n      }\n    };\n    fetch(this.context.API_URL + '/users/', options).then(data => data.json()).then(data => {\n      if (!data.message) this.setState({\n        users: data\n      });else this.setState({\n        error: data.message\n      });\n    }).catch(err => console.log(err));\n  }\n\n  deleteUser(id) {\n    const options = {\n      method: 'delete',\n      headers: {\n        'Authorization': 'Bearer ' + this.context.token,\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    };\n    fetch(this.context.API_URL + '/users/' + id, options).then(() => {\n      const users = this.state.users;\n      this.setState({\n        users: users.filter(user => user.id !== id)\n      });\n    }).catch(err => console.log(err));\n  }\n\n  render() {\n    const _this$state = this.state,\n          users = _this$state.users,\n          error = _this$state.error;\n\n    const _users = users.map(user => {\n      return _objectSpread({}, user, {\n        deleteUser: this.deleteUser\n      });\n    });\n\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, users && users.length > 0 && !error && React.createElement(UserList, {\n      users: _users,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }), users && users.length <= 0 && React.createElement(\"div\", {\n      className: \"box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, \"No users yet\"), error && React.createElement(Notification, {\n      message: error,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }));\n  }\n\n}\n\nUsersPage.contextType = Context;\nexport default UsersPage;","map":{"version":3,"sources":["/home/lfx/Downloads/BrainJobs/frontend/src/pages/users/UsersPage.js"],"names":["React","UserList","Notification","Context","UsersPage","Component","constructor","props","state","users","error","deleteUser","bind","componentWillMount","context","token","history","push","options","headers","fetch","API_URL","then","data","json","message","setState","catch","err","console","log","id","method","filter","user","render","_users","map","length","contextType"],"mappings":"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","sourcesContent":["import React from 'react'\n\nimport UserList from '../../components/User/UserList/UserList'\nimport Notification from '../../components/Notification/Notification'\n\nimport Context from '../../context/Context'\n\n\nclass UsersPage extends React.Component {\n\n  static contextType = Context\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      users: [],\n      error: null\n    }\n    this.deleteUser = this.deleteUser.bind(this)\n  }\n\n  componentWillMount() {\n    if (!this.context.token) return this.props.history.push('/login')\n\n    const options = {\n      headers: {\n        'Authorization': 'Bearer ' + this.context.token\n      }\n    }\n    fetch(this.context.API_URL + '/users/', options)\n      .then(data => data.json())\n      .then(data =>  {\n        if (!data.message)\n          this.setState({ users: data })\n        else\n          this.setState({ error: data.message })\n      })\n      .catch(err => console.log(err))\n  }\n\n  deleteUser(id) {\n    const options = {\n      method: 'delete',\n      headers: {\n        'Authorization': 'Bearer ' + this.context.token,\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }\n    fetch(this.context.API_URL + '/users/' + id, options)\n      .then(() => {\n        const { users } = this.state\n        this.setState({\n            users: users.filter(user => user.id !== id)\n        })\n      })\n      .catch(err => console.log(err))\n  }\n\n  render() {\n    const { users, error } = this.state\n    const _users = users.map(user => { return {...user, deleteUser: this.deleteUser} })\n\n    return (\n      <div className=\"container\">\n        {users && users.length > 0 && !error && <UserList users={_users} />}\n\n        {users && users.length <= 0 && <div className=\"box\">No users yet</div>}\n\n        {error && <Notification message={error} />}\n      </div>\n    )\n  }\n}\n\nexport default UsersPage"]},"metadata":{},"sourceType":"module"}