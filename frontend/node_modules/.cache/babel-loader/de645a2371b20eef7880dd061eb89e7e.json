{"ast":null,"code":"import _objectSpread from \"/home/lfx/Downloads/BrainJobs/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/home/lfx/Downloads/BrainJobs/frontend/src/pages/auth/LoginPage.js\";\nimport React from 'react';\nimport { NavLink, Redirect } from 'react-router-dom';\nimport Input from '../../components/Form/Input/Input';\nimport Button from '../../components/Form/Button/Button';\nimport Notification from '../../components/Notification/Notification';\nimport Context from '../../context/Context';\nimport './auth.css';\n\nclass LoginPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fields: {\n        username: '',\n        password: ''\n      },\n      error: null\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  checkIfValid(value) {\n    return value !== undefined && value !== null && value !== \"\";\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    const _this$state$fields = this.state.fields,\n          username = _this$state$fields.username,\n          password = _this$state$fields.password;\n\n    if (this.checkIfValid(username) && this.checkIfValid(password)) {\n      const options = {\n        method: 'post',\n        body: JSON.stringify({\n          username: username,\n          password: password\n        }),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      };\n      const url = this.context.API_URL + '/auth/login';\n      fetch(url, options).then(data => data.json()).then(data => {\n        if (data.auth) {\n          this.context.login(data.token, data.username);\n          this.props.history.push(\"/jobs\");\n        }\n\n        if (data.message) this.setState({\n          error: data.message\n        });\n      }).catch(err => console.log(err));\n    }\n  }\n\n  handleChange(e) {\n    const fields = this.state.fields;\n    this.setState({\n      fields: _objectSpread({}, fields, {\n        [e.target.name]: e.target.value\n      })\n    });\n  }\n\n  render() {\n    const _this$state = this.state,\n          fields = _this$state.fields,\n          error = _this$state.error;\n    const username = fields.username,\n          password = fields.password;\n    if (this.context.token) return React.createElement(Redirect, {\n      from: \"/login\",\n      to: \"/jobs\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    });\n    return React.createElement(\"div\", {\n      id: \"auth\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, error && React.createElement(Notification, {\n      message: error,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }), React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"title is-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"Login\"), React.createElement(Input, {\n      type: 'text',\n      title: 'Username',\n      name: 'username',\n      value: username,\n      placeholder: 'Enter your username or email',\n      handleChange: this.handleChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }), React.createElement(Input, {\n      type: 'password',\n      title: 'Password',\n      name: 'password',\n      value: password,\n      placeholder: 'Enter your password',\n      handleChange: this.handleChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"field is-grouped is-pulled-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(Button, {\n      className: \"button is-link\",\n      title: 'Login',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }), React.createElement(NavLink, {\n      to: \"/register\",\n      className: \"button is-success\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"Register\")))));\n  }\n\n}\n\nLoginPage.contextType = Context;\nexport default LoginPage;","map":{"version":3,"sources":["/home/lfx/Downloads/BrainJobs/frontend/src/pages/auth/LoginPage.js"],"names":["React","NavLink","Redirect","Input","Button","Notification","Context","LoginPage","Component","constructor","props","state","fields","username","password","error","handleSubmit","bind","handleChange","checkIfValid","value","undefined","e","preventDefault","options","method","body","JSON","stringify","headers","url","context","API_URL","fetch","then","data","json","auth","login","token","history","push","message","setState","catch","err","console","log","target","name","render","contextType"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { NavLink, Redirect } from 'react-router-dom'\n\nimport Input from '../../components/Form/Input/Input'\nimport Button from '../../components/Form/Button/Button'\nimport Notification from '../../components/Notification/Notification'\n\nimport Context from '../../context/Context'\n\nimport './auth.css'\n\n\nclass LoginPage extends React.Component {\n\n  static contextType = Context\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      fields: {\n        username: '',\n        password: ''\n      },\n      error: null\n    }\n    this.handleSubmit = this.handleSubmit.bind(this)\n    this.handleChange = this.handleChange.bind(this)\n  }\n\n  checkIfValid(value) {\n    return (\n      value !== undefined &&\n      value !== null &&\n      value !== \"\"\n    )\n  }\n\n  handleSubmit(e) {\n    e.preventDefault()\n\n    const { username, password } = this.state.fields\n\n    if (this.checkIfValid(username) &&\n        this.checkIfValid(password)) {\n\n      const options = {\n        method: 'post',\n        body: JSON.stringify({\n          username: username,\n          password: password\n        }),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      }\n\n      const url = this.context.API_URL + '/auth/login'\n      fetch(url, options)\n        .then(data => data.json())\n        .then(data => {\n          if (data.auth) {\n            this.context.login(data.token, data.username)\n            this.props.history.push(\"/jobs\")\n          }\n          if(data.message)\n            this.setState({error: data.message})\n        })\n        .catch(err => console.log(err))\n    }\n  }\n\n  handleChange(e) {\n    const { fields } = this.state\n    this.setState({\n      fields: {...fields, [e.target.name] : e.target.value}\n    })\n  }\n\n  render() {\n    const { fields, error } = this.state\n    const { username, password } = fields\n    \n    if (this.context.token) return <Redirect from=\"/login\" to=\"/jobs\" />\n\n    return (\n      <div id=\"auth\">\n        <div className=\"box\">\n          {error && <Notification message={error} />}\n          <form onSubmit={this.handleSubmit}>\n            <h2 className=\"title is-3\">Login</h2>\n            <Input \n              type={'text'}\n              title={'Username'}\n              name={'username'}\n              value={username}\n              placeholder={'Enter your username or email'}\n              handleChange={this.handleChange}\n              required={true}\n            />\n            <Input\n              type={'password'}\n              title={'Password'}\n              name={'password'}\n              value={password}\n              placeholder={'Enter your password'}\n              handleChange={this.handleChange}\n              required={true}\n            />\n            <div className=\"field is-grouped is-pulled-right\">\n              <Button className=\"button is-link\" title={'Login'}/>\n              <NavLink to=\"/register\" className=\"button is-success\">\n                Register\n              </NavLink>\n            </div>\n          </form>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default LoginPage"]},"metadata":{},"sourceType":"module"}